<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kết quả thanh toán - Second-hand EV</title>
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

    <link rel="stylesheet" href="css/pay.css" />
    <link rel="stylesheet" href="css/payment.css" />
    <link rel="stylesheet" href="/css/navbar.css" />
    <link rel="stylesheet" href="/css/like-notif.css" />

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0fdf4; /* Xanh lá rất nhạt */
            background-image: radial-gradient(#dcfce7 1px, transparent 1px);
            background-size: 24px 24px;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        .success-ring {
            animation: ringPulse 2s infinite;
        }
        @keyframes ringPulse {
            0% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(22, 163, 74, 0); }
            100% { box-shadow: 0 0 0 0 rgba(22, 163, 74, 0); }
        }
    </style>
  </head>

  <body class="text-gray-800 flex flex-col min-h-screen">
    
    <div id="pageLoading" class="fixed inset-0 bg-white z-50 flex items-center justify-center transition-opacity duration-500">
        <div class="flex flex-col items-center">
            <div class="animate-spin rounded-full h-16 w-16 border-4 border-green-100 border-t-green-600 mb-4"></div>
            <p class="text-green-700 font-medium animate-pulse">Đang xử lý...</p>
        </div>
    </div>

    <div id="navbar-placeholder"></div>

    <section class="py-12 lg:py-20 flex-grow flex items-center justify-center relative">
      <div class="absolute top-20 left-10 w-72 h-72 bg-green-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
      <div class="absolute bottom-20 right-10 w-72 h-72 bg-emerald-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>

      <div class="container mx-auto px-4 relative z-10">
        
        <div class="payment-result-wrapper max-w-2xl mx-auto glass-card p-8 md:p-12 rounded-3xl shadow-[0_20px_60px_-15px_rgba(0,0,0,0.1)] border border-white/50 overflow-hidden" data-aos="fade-up" data-aos-duration="800">
          
          <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-400 via-emerald-500 to-teal-500"></div>

          <div id="paymentSuccess" class="text-center hidden">
            <div class="mx-auto mb-8 relative">
                <div class="w-28 h-28 bg-green-50 rounded-full flex items-center justify-center mx-auto success-ring border-4 border-white shadow-lg">
                    <i data-lucide="check" class="w-14 h-14 text-green-600 stroke-[3]"></i>
                </div>
            </div>
            
            <h2 class="text-3xl md:text-4xl font-bold mb-3 text-gray-900 tracking-tight">Thanh toán thành công!</h2>
            
            <p class="text-lg text-gray-600 mb-8 leading-relaxed max-w-md mx-auto">
              Cảm ơn bạn đã lựa chọn <b class="text-green-700">Second-hand EV</b>.<br />
              Đơn hàng của bạn đã được hệ thống xác nhận.
            </p>
            
            <div id="redirectCountdown" class="text-sm font-semibold text-green-700 bg-green-50 border border-green-100 py-2 px-6 rounded-full inline-flex items-center gap-2 shadow-sm">
                <i class="fa-solid fa-spinner fa-spin"></i> Đang chuyển hướng...
            </div>
          </div>

          <div id="paymentFailed" class="text-center hidden">
            <div class="mx-auto mb-8">
                <div class="w-28 h-28 bg-red-50 rounded-full flex items-center justify-center mx-auto border-4 border-white shadow-lg">
                    <i data-lucide="x" class="w-14 h-14 text-red-500 stroke-[3]"></i>
                </div>
            </div>
            <h2 class="text-3xl md:text-4xl font-bold mb-3 text-gray-900">Thanh toán thất bại</h2>
            <p class="text-lg text-gray-600 mb-6">
              Giao dịch chưa thể hoàn tất.<br>Vui lòng kiểm tra lại số dư hoặc đường truyền.
            </p>
          </div>

          <div id="customerInfo" class="mt-10 hidden" data-aos="fade-up" data-aos-delay="200">
            <div class="bg-gray-50/80 rounded-2xl p-6 md:p-8 border border-gray-200/60 relative">
                <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-full flex justify-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-gray-200"></div>
                    <div class="w-2 h-2 rounded-full bg-gray-200"></div>
                    <div class="w-2 h-2 rounded-full bg-gray-200"></div>
                </div>

                <h3 class="font-bold text-lg mb-6 text-gray-800 flex items-center gap-2 uppercase tracking-wide text-xs text-gray-500">
                    <i data-lucide="receipt" class="w-4 h-4"></i> Chi tiết hóa đơn
                </h3>
                
                <div class="space-y-4 text-sm md:text-base">
                    <div class="flex justify-between items-center pb-3 border-b border-dashed border-gray-300">
                        <span class="text-gray-500">Khách hàng</span> 
                        <span id="cName" class="font-bold text-gray-900 text-lg"></span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-500">Điện thoại</span> 
                        <span id="cPhone" class="font-medium text-gray-800"></span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-500">Email</span> 
                        <span id="cEmail" class="font-medium text-gray-800"></span>
                    </div>
                    <div class="flex justify-between items-start pt-2">
                        <span class="text-gray-500 shrink-0">Địa chỉ nhận</span> 
                        <span id="cAddress" class="font-medium text-right ml-4 text-gray-800 leading-snug"></span>
                    </div>
                    <div class="flex justify-between items-center pt-4 mt-2 bg-white p-3 rounded-lg border border-gray-100 shadow-sm">
                        <span class="text-gray-500 font-medium">Phương thức</span> 
                        <span id="cMethod" class="font-bold text-emerald-700 bg-emerald-100 px-3 py-1 rounded text-sm tracking-wide uppercase"></span>
                    </div>
                </div>
                
                <div id="extraNote" class="mt-4 text-center text-sm text-gray-500 italic"></div>
            </div>
          </div>

          <div id="paymentActions" class="text-center mt-10 flex flex-col sm:flex-row gap-4 justify-center items-center">
               </div>

          <div class="text-center mt-8 pt-6 border-t border-gray-100">
            <a href="index.html" class="group inline-flex items-center justify-center gap-2 text-gray-500 hover:text-green-600 font-medium transition-colors duration-300">
                <span class="group-hover:-translate-x-1 transition-transform duration-300"><i data-lucide="arrow-left" class="w-4 h-4"></i></span>
                Quay về Trang chủ
            </a>
          </div>

        </div>
      </div>
    </section>

    <div id="footer-placeholder"></div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            once: true,
            offset: 50,
            duration: 800,
        });
        lucide.createIcons();
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-messaging.js"></script>
    
    <script src="/js/auth.js"></script>
    <script src="/js/navbar.js" defer></script>
    <script src="/js/like-notif.js"></script>
    <script src="/js/chat-badge.js"></script>
    <script src="/js/review-badge.js"></script>
    <script src="/js/firebase-messaging-init.js"></script>
    <script src="/js/Notification.js"></script>
    <script src="/js/component-loader.js"></script>
    <script src="js/payment_success.js"></script>
    <script src="js/compare.js"></script>
  </body>
</html>